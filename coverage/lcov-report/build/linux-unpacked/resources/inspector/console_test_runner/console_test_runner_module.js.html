<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for build/linux-unpacked/resources/inspector/console_test_runner/console_test_runner_module.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../../../index.html">All files</a> / <a href="index.html">build/linux-unpacked/resources/inspector/console_test_runner</a> console_test_runner_module.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/307</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/100</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/58</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/52</span>
      </div>
    </div>
    <p class="quiet">
      Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
    </p>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a></td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="cstat-no" title="statement not covered" >ConsoleTestRunner.Formatter;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.dumpConsoleMessages=<span class="fstat-no" title="function not covered" >fu</span>nction(printOriginatingCommand,dumpClassNames,formatter){<span class="cstat-no" title="statement not covered" >TestRunner.addResults(ConsoleTestRunner.dumpConsoleMessagesIntoArray(printOriginatingCommand,dumpClassNames,formatter));}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.dumpConsoleMessagesIntoArray=<span class="fstat-no" title="function not covered" >fu</span>nction(printOriginatingCommand,dumpClassNames,formatter){<span class="cstat-no" title="statement not covered" >formatter=formatter||ConsoleTestRunner.prepareConsoleMessageText;c</span>onst result=<span class="cstat-no" title="statement not covered" >[];</span>const consoleView=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance();</span>const originalViewportStyle=<span class="cstat-no" title="statement not covered" >consoleView._viewport.element.style;</span>const originalSize=<span class="cstat-no" title="statement not covered" >{width:originalViewportStyle.width,height:originalViewportStyle.height};<span class="cstat-no" title="statement not covered" ></span>ConsoleTestRunner.disableConsoleViewport();<span class="cstat-no" title="statement not covered" >i</span>f(consoleView._needsFullUpdate)</span></span>
<span class="cstat-no" title="statement not covered" >consoleView._updateMessageList();c</span>onst viewMessages=<span class="cstat-no" title="statement not covered" >consoleView._visibleViewMessages;<span class="cstat-no" title="statement not covered" ></span>for(let i=0;i&lt;viewMessages.length;++i){const uiMessage=<span class="cstat-no" title="statement not covered" >viewMessages[i];</span>const message=<span class="cstat-no" title="statement not covered" >uiMessage.consoleMessage();</span>const element=<span class="cstat-no" title="statement not covered" >uiMessage.element();</span>let classNames;<span class="cstat-no" title="statement not covered" >if(dumpClassNames){<span class="cstat-no" title="statement not covered" >classNames=[''];<span class="cstat-no" title="statement not covered" >f</span>or(let node=element.firstChild;node;node=node.traverseNextNode(element)){<span class="cstat-no" title="statement not covered" >if(node.nodeType===Node.ELEMENT_NODE&amp;&amp;node.className){let depth=<span class="cstat-no" title="statement not covered" >0;</span>let depthTest=<span class="cstat-no" title="statement not covered" >node;<span class="cstat-no" title="statement not covered" ></span>while(depthTest!==element){<span class="cstat-no" title="statement not covered" >if(depthTest.nodeType===Node.ELEMENT_NODE&amp;&amp;depthTest.className)</span></span></span></span></span></span>
<span class="cstat-no" title="statement not covered" >depth++;<span class="cstat-no" title="statement not covered" >d</span>epthTest=depthTest.parentNodeOrShadowHost();}</span>
<span class="cstat-no" title="statement not covered" >classNames.push('  '.repeat(depth)+</span>
node.className.replace('platform-linux','platform-*').replace('platform-mac','platform-*').replace('platform-windows','platform-*'));}}}
<span class="cstat-no" title="statement not covered" >if(ConsoleTestRunner.dumpConsoleTableMessage(uiMessage,false,result)){<span class="cstat-no" title="statement not covered" >if(dumpClassNames)</span></span>
<span class="cstat-no" title="statement not covered" >result.push(classNames.join('\n'));}</span>else{let messageText=<span class="cstat-no" title="statement not covered" >formatter(element,message);<span class="cstat-no" title="statement not covered" ></span>messageText=messageText.replace(/VM\d+/g,'VM');<span class="cstat-no" title="statement not covered" >r</span>esult.push(messageText+(dumpClassNames?' '+classNames.join('\n'):''));}</span>
<span class="cstat-no" title="statement not covered" >if(printOriginatingCommand&amp;&amp;uiMessage.consoleMessage().originatingMessage())</span>
<span class="cstat-no" title="statement not covered" >result.push('Originating from: '+uiMessage.consoleMessage().originatingMessage().messageText);}</span>
<span class="cstat-no" title="statement not covered" >consoleView._viewport.element.style.width=originalSize.width;<span class="cstat-no" title="statement not covered" >c</span>onsoleView._viewport.element.style.height=originalSize.height;<span class="cstat-no" title="statement not covered" >r</span>eturn result;}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.prepareConsoleMessageText=<span class="fstat-no" title="function not covered" >fu</span>nction(messageElement){let messageText=<span class="cstat-no" title="statement not covered" >messageElement.deepTextContent().replace(/\u200b/g,'');<span class="cstat-no" title="statement not covered" ></span>messageText=messageText.replace(/VM\d+/g,'VM');<span class="cstat-no" title="statement not covered" >m</span>essageText=messageText.replace(/(at eval \(eval at evaluate) \(:\d+:\d+\)/,'$1');<span class="cstat-no" title="statement not covered" >i</span>f(messageText.startsWith('Navigated to')){const fileName=<span class="cstat-no" title="statement not covered" >messageText.split(' ').pop().split('/').pop();<span class="cstat-no" title="statement not covered" ></span>messageText='Navigated to '+fileName;}</span></span></span>
<span class="cstat-no" title="statement not covered" >messageText=messageText.substring(0,1024);<span class="cstat-no" title="statement not covered" >r</span>eturn messageText;}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.dumpConsoleTableMessage=<span class="fstat-no" title="function not covered" >fu</span>nction(viewMessage,forceInvalidate,results){<span class="cstat-no" title="statement not covered" >if(forceInvalidate)</span></span>
<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._viewport.invalidate();c</span>onst table=<span class="cstat-no" title="statement not covered" >viewMessage.element();</span>const headers=<span class="cstat-no" title="statement not covered" >table.querySelectorAll('th &gt; div:first-child');<span class="cstat-no" title="statement not covered" ></span>if(!headers.length)</span>
<span class="cstat-no" title="statement not covered" >return false;l</span>et headerLine=<span class="cstat-no" title="statement not covered" >'';<span class="cstat-no" title="statement not covered" ></span>for(let i=0;i&lt;headers.length;i++)</span>
<span class="cstat-no" title="statement not covered" >headerLine+=headers[i].textContent+' | ';<span class="cstat-no" title="statement not covered" >a</span>ddResult('HEADER '+headerLine);c</span>onst rows=<span class="cstat-no" title="statement not covered" >table.querySelectorAll('.data-container tr');<span class="cstat-no" title="statement not covered" ></span>for(let i=0;i&lt;rows.length;i++){const row=<span class="cstat-no" title="statement not covered" >rows[i];</span>let rowLine=<span class="cstat-no" title="statement not covered" >'';</span>const items=<span class="cstat-no" title="statement not covered" >row.querySelectorAll('td &gt; span');<span class="cstat-no" title="statement not covered" ></span>for(let j=0;j&lt;items.length;j++)</span></span>
<span class="cstat-no" title="statement not covered" >rowLine+=items[j].textContent+' | ';<span class="cstat-no" title="statement not covered" >i</span>f(rowLine.trim())</span>
<span class="cstat-no" title="statement not covered" >addResult('ROW '+rowLine);}</span>
function <span class="fstat-no" title="function not covered" >addResult(</span>x){<span class="cstat-no" title="statement not covered" >if(results)</span>
<span class="cstat-no" title="statement not covered" >results.push(x);e</span>lse
<span class="cstat-no" title="statement not covered" >TestRunner.addResult(x);}</span>
<span class="cstat-no" title="statement not covered" >return true;}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.disableConsoleViewport=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.fixConsoleViewportDimensions(600,2000);}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.fixConsoleViewportDimensions=<span class="fstat-no" title="function not covered" >fu</span>nction(width,height){const viewport=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._viewport;<span class="cstat-no" title="statement not covered" ></span>viewport.element.style.width=width+'px';<span class="cstat-no" title="statement not covered" >v</span>iewport.element.style.height=height+'px';<span class="cstat-no" title="statement not covered" >v</span>iewport.element.style.position='absolute';<span class="cstat-no" title="statement not covered" >v</span>iewport.invalidate();}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.selectMainExecutionContext=<span class="fstat-no" title="function not covered" >fu</span>nction(){const executionContexts=<span class="cstat-no" title="statement not covered" >TestRunner.runtimeModel.executionContexts();<span class="cstat-no" title="statement not covered" ></span>for(const context of executionContexts){<span class="cstat-no" title="statement not covered" >if(context.isDefault){<span class="cstat-no" title="statement not covered" >UI.context.setFlavor(SDK.ExecutionContext,context);<span class="cstat-no" title="statement not covered" >r</span>eturn;}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.evaluateInConsole=<span class="fstat-no" title="function not covered" >fu</span>nction(code,callback,dontForceMainContext){<span class="cstat-no" title="statement not covered" >if(!dontForceMainContext)</span></span>
<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.selectMainExecutionContext();<span class="cstat-no" title="statement not covered" >c</span>allback=TestRunner.safeWrap(callback);c</span>onst consoleView=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance();<span class="cstat-no" title="statement not covered" ></span>consoleView._prompt._appendCommand(code,true);<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.addConsoleViewSniffer(<span class="fstat-no" title="function not covered" >fu</span>nction(commandResult){<span class="cstat-no" title="statement not covered" >callback(commandResult.toMessageElement().deepTextContent());}</span>);}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.evaluateInConsolePromise=<span class="fstat-no" title="function not covered" >fu</span>nction(code,dontForceMainContext){<span class="cstat-no" title="statement not covered" >return new Promise(<span class="fstat-no" title="function not covered" >fu</span>lfill=&gt;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.evaluateInConsole(code,fulfill,dontForceMainContext))</span>;}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.addConsoleViewSniffer=<span class="fstat-no" title="function not covered" >fu</span>nction(override,opt_sticky){<span class="cstat-no" title="statement not covered" >TestRunner.addSniffer(Console.ConsoleView.prototype,'_consoleMessageAddedForTest',override,opt_sticky);}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.waitForPendingViewportUpdates=<span class="fstat-no" title="function not covered" >as</span>ync function(){const refreshPromise=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._scheduledRefreshPromiseForTest||Promise.resolve();<span class="cstat-no" title="statement not covered" ></span>await refreshPromise;}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.evaluateInConsoleAndDump=<span class="fstat-no" title="function not covered" >fu</span>nction(code,callback,dontForceMainContext){<span class="cstat-no" title="statement not covered" >callback=TestRunner.safeWrap(callback);f</span>unction <span class="fstat-no" title="function not covered" >mycallback(</span>text){<span class="cstat-no" title="statement not covered" >text=text.replace(/\bVM\d+/g,'VM');<span class="cstat-no" title="statement not covered" >T</span>estRunner.addResult(code+' = '+text);<span class="cstat-no" title="statement not covered" >c</span>allback(text);}</span></span>
<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.evaluateInConsole(code,mycallback,dontForceMainContext);}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.consoleMessagesCount=<span class="fstat-no" title="function not covered" >fu</span>nction(){const consoleView=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance();<span class="cstat-no" title="statement not covered" ></span>return consoleView._consoleMessages.length;}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.formatterIgnoreStackFrameUrls=<span class="fstat-no" title="function not covered" >fu</span>nction(messageFormatter,node){function <span class="fstat-no" title="function not covered" >isNotEmptyLine(</span>string){<span class="cstat-no" title="statement not covered" >return string.trim().length&gt;0;}</span></span>
function <span class="fstat-no" title="function not covered" >ignoreStackFrameAndMutableData(</span>string){let buffer=<span class="cstat-no" title="statement not covered" >string.replace(/\u200b/g,'');<span class="cstat-no" title="statement not covered" ></span>buffer=buffer.replace(/VM\d+/g,'VM');<span class="cstat-no" title="statement not covered" >r</span>eturn buffer.replace(/^\s+at [^\]]+(]?)$/,'$1');}</span>
<span class="cstat-no" title="statement not covered" >messageFormatter=messageFormatter||TestRunner.textContentWithLineBreaks;c</span>onst buffer=<span class="cstat-no" title="statement not covered" >messageFormatter(node);<span class="cstat-no" title="statement not covered" ></span>return buffer.split('\n').map(ignoreStackFrameAndMutableData).filter(isNotEmptyLine).join('\n');}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.simpleFormatter=<span class="fstat-no" title="function not covered" >fu</span>nction(element,message){<span class="cstat-no" title="statement not covered" >return message.messageText+':'+message.line+':'+message.column;}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.dumpConsoleMessagesIgnoreErrorStackFrames=<span class="fstat-no" title="function not covered" >fu</span>nction(printOriginatingCommand,dumpClassNames,messageFormatter){<span class="cstat-no" title="statement not covered" >TestRunner.addResults(ConsoleTestRunner.dumpConsoleMessagesIntoArray(printOriginatingCommand,dumpClassNames,ConsoleTestRunner.formatterIgnoreStackFrameUrls.bind(this,messageFormatter)));}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.dumpConsoleMessagesWithStyles=<span class="fstat-no" title="function not covered" >fu</span>nction(){const messageViews=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._visibleViewMessages;<span class="cstat-no" title="statement not covered" ></span>for(let i=0;i&lt;messageViews.length;++i){const element=<span class="cstat-no" title="statement not covered" >messageViews[i].element();</span>const messageText=<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.prepareConsoleMessageText(element);<span class="cstat-no" title="statement not covered" ></span>TestRunner.addResult(messageText);c</span>onst spans=<span class="cstat-no" title="statement not covered" >element.querySelectorAll('.console-message-text *');<span class="cstat-no" title="statement not covered" ></span>for(let j=0;j&lt;spans.length;++j)</span></span></span>
<span class="cstat-no" title="statement not covered" >TestRunner.addResult('Styled text #'+j+': '+(spans[j].style.cssText||'NO STYLES DEFINED'));}</span>};<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.dumpConsoleMessagesWithClasses=<span class="fstat-no" title="function not covered" >fu</span>nction(sortMessages){const result=<span class="cstat-no" title="statement not covered" >[];</span>const messageViews=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._visibleViewMessages;<span class="cstat-no" title="statement not covered" ></span>for(let i=0;i&lt;messageViews.length;++i){const element=<span class="cstat-no" title="statement not covered" >messageViews[i].element();</span>const contentElement=<span class="cstat-no" title="statement not covered" >messageViews[i].contentElement();</span>const messageText=<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.prepareConsoleMessageText(element);<span class="cstat-no" title="statement not covered" ></span>result.push(messageText+' '+element.getAttribute('class')+' &gt; '+contentElement.getAttribute('class'));}</span></span></span>
<span class="cstat-no" title="statement not covered" >if(sortMessages)</span>
<span class="cstat-no" title="statement not covered" >result.sort();<span class="cstat-no" title="statement not covered" >T</span>estRunner.addResults(result);}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.dumpConsoleClassesBrief=<span class="fstat-no" title="function not covered" >fu</span>nction(){const messageViews=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._visibleViewMessages;<span class="cstat-no" title="statement not covered" ></span>for(let i=0;i&lt;messageViews.length;++i){const repeatText=<span class="cstat-no" title="statement not covered" >messageViews[i].repeatCount()&gt;1?(' x'+messageViews[i].repeatCount()):'';<span class="cstat-no" title="statement not covered" ></span>TestRunner.addResult(messageViews[i].toMessageElement().className+repeatText);}</span>}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.dumpConsoleCounters=<span class="fstat-no" title="function not covered" >as</span>ync function(){const counter=<span class="cstat-no" title="statement not covered" >ConsoleCounters.WarningErrorCounter._instanceForTest;<span class="cstat-no" title="statement not covered" ></span>if(counter._updatingForTest)</span></span>
<span class="cstat-no" title="statement not covered" >await TestRunner.addSnifferPromise(counter,'_updatedForTest');<span class="cstat-no" title="statement not covered" >f</span>or(let index=0;index&lt;counter._titles.length;++index)</span>
<span class="cstat-no" title="statement not covered" >TestRunner.addResult(counter._titles[index]);<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.dumpConsoleClassesBrief();}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.expandConsoleMessages=<span class="fstat-no" title="function not covered" >fu</span>nction(callback,deepFilter,sectionFilter){<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._invalidateViewport();c</span>onst messageViews=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._visibleViewMessages;<span class="cstat-no" title="statement not covered" ></span>for(let i=0;i&lt;messageViews.length;++i)</span></span>
<span class="cstat-no" title="statement not covered" >messageViews[i].element();<span class="cstat-no" title="statement not covered" >T</span>estRunner.deprecatedRunAfterPendingDispatches(expandTreeElements);f</span>unction <span class="fstat-no" title="function not covered" >expandTreeElements(</span>){<span class="cstat-no" title="statement not covered" >for(let i=0;i&lt;messageViews.length;++i){const element=<span class="cstat-no" title="statement not covered" >messageViews[i].element();<span class="cstat-no" title="statement not covered" ></span>for(let node=element;node;node=node.traverseNextNode(element)){<span class="cstat-no" title="statement not covered" >if(node.treeElementForTest)</span></span></span>
<span class="cstat-no" title="statement not covered" >node.treeElementForTest.expand();<span class="cstat-no" title="statement not covered" >i</span>f(node._expandStackTraceForTest)</span>
<span class="cstat-no" title="statement not covered" >node._expandStackTraceForTest();<span class="cstat-no" title="statement not covered" >i</span>f(!node._section)</span>
<span class="cstat-no" title="statement not covered" >continue;<span class="cstat-no" title="statement not covered" >i</span>f(sectionFilter&amp;&amp;!sectionFilter(node._section))</span>
<span class="cstat-no" title="statement not covered" >continue;<span class="cstat-no" title="statement not covered" >n</span>ode._section.expand();<span class="cstat-no" title="statement not covered" >i</span>f(!deepFilter)</span>
<span class="cstat-no" title="statement not covered" >continue;c</span>onst treeElements=<span class="cstat-no" title="statement not covered" >node._section.rootElement().children();<span class="cstat-no" title="statement not covered" ></span>for(let j=0;j&lt;treeElements.length;++j){<span class="cstat-no" title="statement not covered" >for(let treeElement=treeElements[j];treeElement;treeElement=treeElement.traverseNextTreeElement(true,null,true)){<span class="cstat-no" title="statement not covered" >if(deepFilter(treeElement))</span></span></span>
<span class="cstat-no" title="statement not covered" >treeElement.expand();}</span>}}}
<span class="cstat-no" title="statement not covered" >TestRunner.deprecatedRunAfterPendingDispatches(callback);}</span>};<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.expandConsoleMessagesPromise=<span class="fstat-no" title="function not covered" >fu</span>nction(deepFilter,sectionFilter){<span class="cstat-no" title="statement not covered" >return new Promise(<span class="fstat-no" title="function not covered" >fu</span>lfill=&gt;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.expandConsoleMessages(fulfill,deepFilter,sectionFilter))</span>;}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.expandGettersInConsoleMessages=<span class="fstat-no" title="function not covered" >fu</span>nction(callback){const messageViews=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._visibleViewMessages;</span>const properties=<span class="cstat-no" title="statement not covered" >[];</span>let propertiesCount=<span class="cstat-no" title="statement not covered" >0;<span class="cstat-no" title="statement not covered" ></span>TestRunner.addSniffer(ObjectUI.ObjectPropertyTreeElement.prototype,'_updateExpandable',propertyExpandableUpdated);<span class="cstat-no" title="statement not covered" >f</span>or(let i=0;i&lt;messageViews.length;++i){const element=<span class="cstat-no" title="statement not covered" >messageViews[i].element();<span class="cstat-no" title="statement not covered" ></span>for(let node=element;node;node=node.traverseNextNode(element)){<span class="cstat-no" title="statement not covered" >if(node.classList&amp;&amp;node.classList.contains('object-value-calculate-value-button')){<span class="cstat-no" title="statement not covered" >++propertiesCount;<span class="cstat-no" title="statement not covered" >n</span>ode.click();<span class="cstat-no" title="statement not covered" >p</span>roperties.push(node.parentElement.parentElement);}</span>}</span>}</span></span></span>
function <span class="fstat-no" title="function not covered" >propertyExpandableUpdated(</span>){<span class="cstat-no" title="statement not covered" >--propertiesCount;<span class="cstat-no" title="statement not covered" >i</span>f(propertiesCount===0){<span class="cstat-no" title="statement not covered" >for(let i=0;i&lt;properties.length;++i)</span></span>
<span class="cstat-no" title="statement not covered" >properties[i].click();<span class="cstat-no" title="statement not covered" >T</span>estRunner.deprecatedRunAfterPendingDispatches(callback);}</span>else{<span class="cstat-no" title="statement not covered" >TestRunner.addSniffer(ObjectUI.ObjectPropertyTreeElement.prototype,'_updateExpandable',propertyExpandableUpdated);}</span>}};<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.expandConsoleMessagesErrorParameters=<span class="fstat-no" title="function not covered" >fu</span>nction(callback){const messageViews=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._visibleViewMessages;<span class="cstat-no" title="statement not covered" ></span>for(let i=0;i&lt;messageViews.length;++i)</span></span>
<span class="cstat-no" title="statement not covered" >messageViews[i].element();<span class="cstat-no" title="statement not covered" >T</span>estRunner.deprecatedRunAfterPendingDispatches(callback);}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.waitForRemoteObjectsConsoleMessages=<span class="fstat-no" title="function not covered" >fu</span>nction(callback){const messages=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._visibleViewMessages;<span class="cstat-no" title="statement not covered" ></span>for(let i=0;i&lt;messages.length;++i)</span></span>
<span class="cstat-no" title="statement not covered" >messages[i].toMessageElement();<span class="cstat-no" title="statement not covered" >T</span>estRunner.deprecatedRunAfterPendingDispatches(callback);}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.waitForRemoteObjectsConsoleMessagesPromise=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return new Promise(<span class="fstat-no" title="function not covered" >re</span>solve=&gt;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.waitForRemoteObjectsConsoleMessages(resolve))</span>;}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.waitUntilConsoleEditorLoaded=<span class="fstat-no" title="function not covered" >fu</span>nction(){let fulfill;const promise=<span class="cstat-no" title="statement not covered" >new Promise(<span class="fstat-no" title="function not covered" >x=</span>&gt;(<span class="cstat-no" title="statement not covered" >fulfill=x)</span>);</span>const prompt=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._prompt;<span class="cstat-no" title="statement not covered" ></span>if(prompt._editor)</span></span>
<span class="cstat-no" title="statement not covered" >fulfill(prompt._editor);e</span>lse
<span class="cstat-no" title="statement not covered" >TestRunner.addSniffer(Console.ConsolePrompt.prototype,'_editorSetForTest',<span class="fstat-no" title="function not covered" >_=</span>&gt;<span class="cstat-no" title="statement not covered" >fulfill(prompt._editor))</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn promise;}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.waitUntilMessageReceived=<span class="fstat-no" title="function not covered" >fu</span>nction(callback){<span class="cstat-no" title="statement not covered" >TestRunner.addSniffer(SDK.consoleModel,'addMessage',callback,false);}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.waitUntilMessageReceivedPromise=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return new Promise(<span class="fstat-no" title="function not covered" >fu</span>lfill=&gt;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.waitUntilMessageReceived(fulfill))</span>;}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.waitUntilNthMessageReceived=<span class="fstat-no" title="function not covered" >fu</span>nction(count,callback){function <span class="fstat-no" title="function not covered" >override(</span>){<span class="cstat-no" title="statement not covered" >if(--count===0)</span></span>
<span class="cstat-no" title="statement not covered" >TestRunner.safeWrap(callback)();e</span>lse
<span class="cstat-no" title="statement not covered" >TestRunner.addSniffer(SDK.consoleModel,'addMessage',override,false);}</span>
<span class="cstat-no" title="statement not covered" >TestRunner.addSniffer(SDK.consoleModel,'addMessage',override,false);}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.waitUntilNthMessageReceivedPromise=<span class="fstat-no" title="function not covered" >fu</span>nction(count){<span class="cstat-no" title="statement not covered" >return new Promise(<span class="fstat-no" title="function not covered" >fu</span>lfill=&gt;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.waitUntilNthMessageReceived(count,fulfill))</span>;}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.changeExecutionContext=<span class="fstat-no" title="function not covered" >fu</span>nction(namePrefix){const selector=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._consoleContextSelector;<span class="cstat-no" title="statement not covered" ></span>for(const executionContext of selector._items){<span class="cstat-no" title="statement not covered" >if(selector.titleFor(executionContext).startsWith(namePrefix)){<span class="cstat-no" title="statement not covered" >UI.context.setFlavor(SDK.ExecutionContext,executionContext);<span class="cstat-no" title="statement not covered" >r</span>eturn;}</span>}</span></span></span>
<span class="cstat-no" title="statement not covered" >TestRunner.addResult('FAILED: context with prefix: '+namePrefix+' not found in the context list');}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.waitForConsoleMessages=<span class="fstat-no" title="function not covered" >fu</span>nction(expectedCount,callback){const consoleView=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance();<span class="cstat-no" title="statement not covered" ></span>checkAndReturn();f</span>unction <span class="fstat-no" title="function not covered" >checkAndReturn(</span>){<span class="cstat-no" title="statement not covered" >if(consoleView._visibleViewMessages.length===expectedCount){<span class="cstat-no" title="statement not covered" >TestRunner.addResult('Message count: '+expectedCount);<span class="cstat-no" title="statement not covered" >c</span>allback();}</span>else{<span class="cstat-no" title="statement not covered" >TestRunner.addSniffer(consoleView,'_messageAppendedForTests',checkAndReturn);}</span>}</span>};<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.waitForConsoleMessagesPromise=<span class="fstat-no" title="function not covered" >as</span>ync function(expectedCount){<span class="cstat-no" title="statement not covered" >await new Promise(<span class="fstat-no" title="function not covered" >fu</span>lfill=&gt;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.waitForConsoleMessages(expectedCount,fulfill))</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn ConsoleTestRunner.waitForPendingViewportUpdates();}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.selectConsoleMessages=<span class="fstat-no" title="function not covered" >fu</span>nction(fromMessage,fromTextOffset,toMessage,toTextOffset){const consoleView=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance();</span>const from=<span class="cstat-no" title="statement not covered" >selectionContainerAndOffset(consoleView.itemElement(fromMessage).element(),fromTextOffset);</span>const to=<span class="cstat-no" title="statement not covered" >selectionContainerAndOffset(consoleView.itemElement(toMessage).element(),toTextOffset);<span class="cstat-no" title="statement not covered" ></span>window.getSelection().setBaseAndExtent(from.container,from.offset,to.container,to.offset);f</span>unction <span class="fstat-no" title="function not covered" >selectionContainerAndOffset(</span>container,offset){let node=<span class="cstat-no" title="statement not covered" >container;<span class="cstat-no" title="statement not covered" ></span>if(offset===0&amp;&amp;container.nodeType!==Node.TEXT_NODE){<span class="cstat-no" title="statement not covered" >container=(container.traverseNextTextNode());<span class="cstat-no" title="statement not covered" >n</span>ode=container;}</span></span></span>
let charCount=<span class="cstat-no" title="statement not covered" >0;<span class="cstat-no" title="statement not covered" ></span>while((node=node.traverseNextTextNode(container))){const length=<span class="cstat-no" title="statement not covered" >node.textContent.length;<span class="cstat-no" title="statement not covered" ></span>if(charCount+length&gt;=offset)</span></span>
<span class="cstat-no" title="statement not covered" >return{container:node,offset:offset-charCount};<span class="cstat-no" title="statement not covered" >c</span>harCount+=length;}</span>
<span class="cstat-no" title="statement not covered" >return null;}</span>};<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.addConsoleSniffer=<span class="fstat-no" title="function not covered" >fu</span>nction(override,opt_sticky){<span class="cstat-no" title="statement not covered" >TestRunner.addSniffer(SDK.ConsoleModel.prototype,'addMessage',override,opt_sticky);}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.wrapListener=<span class="fstat-no" title="function not covered" >fu</span>nction(func){async function <span class="fstat-no" title="function not covered" >wrapper(</span>){<span class="cstat-no" title="statement not covered" >await Promise.resolve();<span class="cstat-no" title="statement not covered" >f</span>unc.apply(this,arguments);}</span></span>
<span class="cstat-no" title="statement not covered" >return wrapper;}</span>;<span class="cstat-no" title="statement not covered" >ConsoleTestRunner.dumpStackTraces=<span class="fstat-no" title="function not covered" >fu</span>nction(){const viewMessages=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance()._visibleViewMessages;<span class="cstat-no" title="statement not covered" ></span>for(let i=0;i&lt;viewMessages.length;++i){const m=<span class="cstat-no" title="statement not covered" >viewMessages[i].consoleMessage();<span class="cstat-no" title="statement not covered" ></span>TestRunner.addResult('Message['+i+']: '+Bindings.displayNameForURL(m.url||'')+':'+m.line+' '+m.messageText);c</span>onst trace=<span class="cstat-no" title="statement not covered" >m.stackTrace?m.stackTrace.callFrames:null;<span class="cstat-no" title="statement not covered" ></span>if(!trace){<span class="cstat-no" title="statement not covered" >TestRunner.addResult('FAIL: no stack trace attached to message #'+i);}</span>else{<span class="cstat-no" title="statement not covered" >TestRunner.addResult('Stack Trace:\n');<span class="cstat-no" title="statement not covered" >T</span>estRunner.addResult('  url: '+trace[0].url);<span class="cstat-no" title="statement not covered" >T</span>estRunner.addResult('  function: '+trace[0].functionName);<span class="cstat-no" title="statement not covered" >T</span>estRunner.addResult('  line: '+trace[0].lineNumber);}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >C</span>onsoleTestRunner.visibleIndices=<span class="fstat-no" title="function not covered" >fu</span>nction(){const consoleView=<span class="cstat-no" title="statement not covered" >Console.ConsoleView.instance();</span>const viewport=<span class="cstat-no" title="statement not covered" >consoleView._viewport;</span>const viewportRect=<span class="cstat-no" title="statement not covered" >viewport.element.getBoundingClientRect();</span>let first=<span class="cstat-no" title="statement not covered" >-1;</span>let last=<span class="cstat-no" title="statement not covered" >-1;</span>let count=<span class="cstat-no" title="statement not covered" >0;<span class="cstat-no" title="statement not covered" ></span>for(let i=0;i&lt;consoleView._visibleViewMessages.length;i++){const item=<span class="cstat-no" title="statement not covered" >consoleView._visibleViewMessages[i];<span class="cstat-no" title="statement not covered" ></span>if(!item._element||!item._element.isConnected)</span></span></span>
<span class="cstat-no" title="statement not covered" >continue;c</span>onst itemRect=<span class="cstat-no" title="statement not covered" >item._element.getBoundingClientRect();</span>const isVisible=<span class="cstat-no" title="statement not covered" >(itemRect.bottom&gt;viewportRect.top+1)&amp;&amp;(itemRect.top&lt;=viewportRect.bottom-1);<span class="cstat-no" title="statement not covered" ></span>if(isVisible){<span class="cstat-no" title="statement not covered" >first=first===-1?i:first;<span class="cstat-no" title="statement not covered" >l</span>ast=i;<span class="cstat-no" title="statement not covered" >c</span>ount++;}</span>}</span>
<span class="cstat-no" title="statement not covered" >return{first,last,count};}</span>;;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Wed May 15 2019 19:04:04 GMT+0800 (China Standard Time)
</div>
</div>
<script src="../../../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../../../sorter.js"></script>
<script src="../../../../../block-navigation.js"></script>
</body>
</html>
